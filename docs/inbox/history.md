# 历史记录

## 🎯 功能概述

历史记录是一个强大的数据保护功能，它会自动为您的每一篇笔记创建版本快照，让您可以随时回溯和恢复笔记的历史状态。无论是意外删除、误操作，还是想要查看笔记的演变过程，历史记录都能为您提供完整的保障。

## 💾 存储机制

### 📁 本地存储
- **独立目录**：每篇笔记都有专属的历史记录文件夹
- **文件格式**：历史版本以 JSON 格式保存，包含完整的笔记内容、标题、格式等信息
- **命名规则**：文件按时间戳命名（如：`20241201_143052.json`），便于识别保存时间
- **存储位置**：保存在应用的专用历史记录目录中，与主笔记数据分离管理

### ⚡ 自动保存触发
- **智能检测**：当笔记内容发生实质性变化时自动创建历史版本
- **实时保护**：编辑过程中定期自动保存，无需手动操作

## ⏰ 清理策略

### 🗓️ 时间限制
- **保留期限**：所有历史记录最多保留 **30天**
- **自动清理**：应用启动时会自动删除超过30天的历史文件
- **空间优化**：清理过程会同时删除空的历史记录目录，保持存储空间整洁

### 👥 用户权益差异

**🆓 普通用户**
- 每篇笔记最多保留 **10个** 历史版本
- 超出限制时自动删除最旧的版本
- 保留最近的重要修改记录

**💎 PRO 用户**
- **无数量限制**，可保留任意数量的历史版本
- 仅受30天时间限制约束
- 享受更完整的版本管理体验

## 🔧 使用方式

### 📖 查看历史记录
1. 在笔记菜单以及详情页面找到历史记录入口
2. 浏览按时间排序的版本列表
3. 查看每个版本的保存时间、字数等信息

### 🔄 恢复历史版本
1. 选择要恢复的历史版本
2. 预览版本内容确认无误
3. 一键恢复到指定版本
4. 当前内容会自动保存为新的历史版本

## ⚠️ 重要提醒

### 🛡️ 数据安全
- **本地存储**：历史记录完全保存在您的设备上，确保数据隐私
- **自动备份**：建议定期备份整个应用数据，包含历史记录
- **版本保护**：恢复操作不会丢失当前内容，会自动创建恢复前的版本

### 📱 存储空间
- **空间占用**：历史记录会占用一定的本地存储空间
- **智能管理**：系统会自动清理过期文件，无需手动维护

### 🚀 性能优化
- **后台处理**：所有历史记录操作都在后台异步执行，不影响正常使用
- **启动优化**：清理过程在应用启动时进行，确保最佳性能表现
- **智能保存**：避免频繁保存相同内容，减少不必要的存储开销

## 💡 使用建议

1. **重要笔记**：对于重要文档，建议在重大修改前手动触发保存
2. **版本管理**：定期查看历史记录，了解笔记的演变过程
3. **空间管理**：PRO 用户可以根据需要手动删除不需要的历史版本

历史记录功能让您的创作过程更加安心，每一次修改都有迹可循，每一个想法都值得保留！
        